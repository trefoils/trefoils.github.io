<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>客户机/服务器交互模式(C/S) | Trefoil</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="井底之蛙，怎知天大。孤峰之脚，方知人小">
    <link rel="preload" href="/assets/css/0.styles.08f75515.css" as="style"><link rel="preload" href="/assets/js/app.865fbb38.js" as="script"><link rel="preload" href="/assets/js/2.0f0c28b9.js" as="script"><link rel="preload" href="/assets/js/33.40b7751b.js" as="script"><link rel="prefetch" href="/assets/js/10.7b14cb97.js"><link rel="prefetch" href="/assets/js/11.f683145f.js"><link rel="prefetch" href="/assets/js/12.6b8958ab.js"><link rel="prefetch" href="/assets/js/13.dcd7c486.js"><link rel="prefetch" href="/assets/js/14.0e64ef68.js"><link rel="prefetch" href="/assets/js/15.3738b4ad.js"><link rel="prefetch" href="/assets/js/16.6d2a0b84.js"><link rel="prefetch" href="/assets/js/17.d3e472d1.js"><link rel="prefetch" href="/assets/js/18.7f325e10.js"><link rel="prefetch" href="/assets/js/19.81a2113b.js"><link rel="prefetch" href="/assets/js/20.8a409f80.js"><link rel="prefetch" href="/assets/js/21.84d42972.js"><link rel="prefetch" href="/assets/js/22.64df382b.js"><link rel="prefetch" href="/assets/js/23.629238aa.js"><link rel="prefetch" href="/assets/js/24.dbe1f212.js"><link rel="prefetch" href="/assets/js/25.536f91b6.js"><link rel="prefetch" href="/assets/js/26.8919ff36.js"><link rel="prefetch" href="/assets/js/27.8078dabf.js"><link rel="prefetch" href="/assets/js/28.79cf8b47.js"><link rel="prefetch" href="/assets/js/29.d528e890.js"><link rel="prefetch" href="/assets/js/3.7e03a49a.js"><link rel="prefetch" href="/assets/js/30.953c29ea.js"><link rel="prefetch" href="/assets/js/31.7ba64e73.js"><link rel="prefetch" href="/assets/js/32.a0a01885.js"><link rel="prefetch" href="/assets/js/34.de2fb230.js"><link rel="prefetch" href="/assets/js/4.a66dc1e8.js"><link rel="prefetch" href="/assets/js/5.f0631bf8.js"><link rel="prefetch" href="/assets/js/6.efdee8bf.js"><link rel="prefetch" href="/assets/js/7.9c013080.js"><link rel="prefetch" href="/assets/js/8.33e59ac7.js"><link rel="prefetch" href="/assets/js/9.f2c1974a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.08f75515.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Trefoil</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  前端面试题
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专业课" class="dropdown-title"><span class="title">专业课</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/database/" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/study/infomation-safe/" class="nav-link">
  信息安全
</a></li><li class="dropdown-item"><!----> <a href="/study/network/" class="nav-link router-link-active">
  网络编程
</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div> <a href="https://github.com/trefoils/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  前端面试题
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专业课" class="dropdown-title"><span class="title">专业课</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/database/" class="nav-link">
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/study/infomation-safe/" class="nav-link">
  信息安全
</a></li><li class="dropdown-item"><!----> <a href="/study/network/" class="nav-link router-link-active">
  网络编程
</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div> <a href="https://github.com/trefoils/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>网络编程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/network/basic/basic.html" class="sidebar-link">网络编程基础</a></li><li><a href="/study/network/cs-mode/cs-mode.html" aria-current="page" class="active sidebar-link">客户机/服务器交互模式(C/S)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/network/cs-mode/cs-mode.html#服务器的工作过程：" class="sidebar-link">服务器的工作过程：</a></li><li class="sidebar-sub-header"><a href="/study/network/cs-mode/cs-mode.html#客户机的工作过程：" class="sidebar-link">客户机的工作过程：</a></li><li class="sidebar-sub-header"><a href="/study/network/cs-mode/cs-mode.html#客户机与服务器的特性" class="sidebar-link">客户机与服务器的特性</a></li><li class="sidebar-sub-header"><a href="/study/network/cs-mode/cs-mode.html#基于internet的c-s模式的应用程序的特点" class="sidebar-link">基于Internet的C/S模式的应用程序的特点</a></li><li class="sidebar-sub-header"><a href="/study/network/cs-mode/cs-mode.html#客户机与服务器的通信过程" class="sidebar-link">客户机与服务器的通信过程</a></li><li class="sidebar-sub-header"><a href="/study/network/cs-mode/cs-mode.html#网络协议与c-s模式的关系" class="sidebar-link">网络协议与C/S模式的关系</a></li><li class="sidebar-sub-header"><a href="/study/network/cs-mode/cs-mode.html#错综复杂的c-s交互" class="sidebar-link">错综复杂的C/S交互</a></li></ul></li><li><a href="/study/network/p2p-mode/p2p-mode.html" class="sidebar-link">P2P模式</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="客户机-服务器交互模式-c-s"><a href="#客户机-服务器交互模式-c-s" class="header-anchor">#</a> 客户机/服务器交互模式(C/S)</h1> <p>在计算机网络环境中，运行于协议栈之上并借助协议栈实现通信的网络应用程序称为网络应用进程。进程就是运行中的程序，往往通过位于不同主机中的多个应用进程之间的通信和协同工作，来解决具体的网络应用问题。网络应用进程通信时，普遍采用客户机/服务器交互模式（Client-Server Paradigm ofInteraction），简称C/S模式。这是Internet上应用程序最常用的通信模式，即客户向服务器发出服务请求，服务器接收到请求后，提供相应的服务。</p> <p>C/S模式的建立基于以下两点：首先，建立网络的起因是网络中软硬件资源、运算能力和信息不均等，需要共享，从而造就拥有众多资源的主机提供服务，资源较少的客户请求服务这一非对等关系；其次，网间进程通信完全是异步的，相互通信的进程间既不存在父子关系，又不共享内存缓冲区，因此需要一种机制为希望通信的进程间建立联系，为二者的数据交换提供同步。</p> <p>C/S模式过程中<code>服务器</code>处于被动服务的地位。首先服务器方要先启动，并根据客户请求提供相应服务。</p> <h2 id="服务器的工作过程："><a href="#服务器的工作过程：" class="header-anchor">#</a> 服务器的工作过程：</h2> <p>首先服务器方要先启动，并根据客户请求提供相应服务，服务器处于被动服务的地位。</p> <ol><li>打开一通信通道，并告知服务器所在的主机，它愿意在某一公认的地址上（熟知端口，如FTP为21）接收客户请求。</li> <li>等待客户的请求到达该端口。</li> <li>服务器接收到服务请求，处理该请求并发送应答信号。为了能并发地接收多个客户的服务请求，要激活一个新进程或新线程来处理这个客户请求（如UNIX系统中用fork、exec）。服务完成后，关闭此新进程与客户的通信通路，并终止。</li> <li>返回第（2）步，等待并处理另一客户请求。</li> <li>在特定的情况下，关闭服务器。</li></ol> <h2 id="客户机的工作过程："><a href="#客户机的工作过程：" class="header-anchor">#</a> 客户机的工作过程：</h2> <p>客户方采取的是主动请求方式。</p> <ol><li>打开一通信通道，并连接到服务器所在主机的特定监听端口。</li> <li>向服务器发送请求报文，等待并接收应答，然后继续提出请求。与服务器的会话按照应用协议进行。</li> <li>请求结束后，关闭通信通道并终止。</li></ol> <h2 id="客户机与服务器的特性"><a href="#客户机与服务器的特性" class="header-anchor">#</a> 客户机与服务器的特性</h2> <p><strong>客户端软件</strong></p> <ol><li>在进行网络通信时临时成为客户机，但它也可在本地进行其他的计算。</li> <li>被用户调用，只为一个会话运行。在打算通信时主动向远地服务器发起通信。</li> <li>能访问所需的多种服务，但在某一时刻只能与一个远程服务器进行主动通信。</li> <li>主动地启动与服务器的通信。</li> <li>在用户的计算机上运行，不需要特殊的硬件和很复杂的操作系统。</li></ol> <p><strong>服务器软件</strong></p> <ol><li>是一种专门用来提供某种服务的程序，可同时处理多个远地客户机的请求。</li> <li>当系统启动时即自动调用，并且连续运行着，不断地为多个会话服务。</li> <li>接收来自任何客户机的通信请求，但只提供一种服务。</li> <li>被动地等待并接收来自多个远端客户机的通信请求。</li> <li>在共享计算机上运行，一般需要强大的硬件和高级的操作系统支持。</li></ol> <h2 id="基于internet的c-s模式的应用程序的特点"><a href="#基于internet的c-s模式的应用程序的特点" class="header-anchor">#</a> 基于Internet的C/S模式的应用程序的特点</h2> <ol><li>客户机和服务器都是软件进程，C/S模式是网络上通过进程通信建立分布式应用的常用模型。</li> <li>非对称性：服务器通过网络提供服务，客户机通过网络使用服务，这种不对称性体现在软件结构和工作过程上。</li> <li>对等性：客户机和服务器必有一套共识的约定，必与某种应用层协议相联，并且必须在通信的两端实现协议。例如，浏览器和WWW服务器就都基于超文本传输协议（HTTP）。</li> <li>服务器的被动性：服务器必须先行启动，时刻监听，日夜值守，及时服务，只要有客户机请求，就立即处理并响应、回传信息，但决不主动提供服务。</li> <li>客户机的主动性：客户机可以随时提出请求，通过网络得到服务，也可以关机离开，一次请求与服务的过程是由客户机首先激发的。</li> <li>一对多：一个服务器可以为多个客户机服务；客户机也可以打开多个窗口，连接多个服务器。</li> <li>分布性与共享性：资源在服务器端组织与存储，通过网络为分散的多个客户机使用。</li></ol> <h2 id="客户机与服务器的通信过程"><a href="#客户机与服务器的通信过程" class="header-anchor">#</a> 客户机与服务器的通信过程</h2> <ol><li>在通信可以进行之前，服务器应先行启动，并通知它的下层协议栈做好接收客户机请求的准备，然后被动地等待客户机的通信请求。我们称服务器处于监听状态。</li> <li>一般是先由客户机向服务器发送请求，服务器向客户机返回应答。客户机随时可以主动启动通信，向服务器发出连接请求，服务器接收这个请求后，建立它们之间的通信关系。</li> <li>客户机与服务器的通信关系一旦建立，客户机和服务器都可发送和接收信息。信息在客户机与服务器之间可以沿任一方向或两个方向传递。在某些情况下，客户机向服务器发送一系列请求，服务器相应地返回一系列应答。</li></ol> <h2 id="网络协议与c-s模式的关系"><a href="#网络协议与c-s模式的关系" class="header-anchor">#</a> 网络协议与C/S模式的关系</h2> <p>客户机与服务器作为两个软件实体，它们之间的通信是虚拟的，是概念上的；实际的通信要借助下层的网络协议栈来进行。在发送端，信息自上向下传递，每层协议实体都加上自己的协议报头，传到物理层，将数据变为信号传输出去；在接收端，信息自下向上传递，每层协议实体按照本层的协议报头进行处理，然后将本层报头剥去。例如，在Internet中，客户机与服务器借助传输层协议（TCP或UDP）来收发信息。传输层协议接着使用更低层的协议来收发自己的信息。因此，一台计算机，不论是运行客户机程序还是服务器程序，都需要一个完整的协议栈。大多数的应用进程都是使用TCP/IP进行通信。一对客户机与服务器使用TCP/IP协议栈，分别通过传输协议在Internet上进行交互通信。</p> <h2 id="错综复杂的c-s交互"><a href="#错综复杂的c-s交互" class="header-anchor">#</a> 错综复杂的C/S交互</h2> <p>客户机与服务器之间的交互是任意的，在实际的网络应用中，往往形成错综复杂的C/S交互局面，这是C/S模式最有趣也是最有用的功能。</p> <p>客户机应用访问某一类服务时并不限于一个服务器。在Internet的各种服务中，在不同计算机上运行的服务器程序会提供不同的信息。例如，一个日期服务器程序可能给出它所运行的计算机的当前日期和时间，处于不同时区的计算机上的服务器程序会给出不同的回答。同一个客户机应用能够先是某个服务器程序的客户机，以后又与另一台计算机上的服务器程序通信，成为另一个服务器程序的客户机。例如，用户使用IE浏览器，先浏览雅虎网站，再浏览搜狐网站，就是这种情况。</p> <p><strong>在C/S模式中，存在着3种<code>一个与多个</code>的关系</strong></p> <ol><li>一个服务器同时为多个客户机服务：在Internet上的各种服务器，如WWW服务器、电子邮件服务器和文件传输服务器等，都能同时为多个客户机服务。例如，在一个网吧中，几十个人都在浏览网易网站的页面，但每个人都感觉不到别人对自己的影响。其实，今天Internet上的服务器，往往同时接待着成千上万个客户机。但服务器所在的计算机可能只有一个通往Internet的物理连接。</li> <li>一个用户的计算机上同时运行多个连接不同服务器的客户机：有经验的网友都知道，在Windows的桌面上，可以同时打开多个浏览器的窗口，每个窗口连接一个网站，这样可以加快下载的速度。当在一个窗口中浏览的时候，可能另一个窗口正在下载页面文件或图像。在这里，一个浏览器的窗口，就是一个浏览器软件的运行实例，就是一个作为客户机的应用进程，它与一个服务器建立一个连接关系，支持与该服务器的会话。这样，用户的PC中就同时运行着多个客户机，分别连接着不同的服务器。同样，用户的PC也只有一个通往Internet的物理连接。</li> <li>一个服务器类的计算机同时运行多个服务器：一套足够强大的计算机系统能够同时运行多个服务器进程。在这样的系统上，对应提供的每种服务都有一个服务器程序在运行。例如，一台计算机可能同时运行文件服务器和WWW服务器。下图说明了两台计算机上的客户机程序访问第3台计算机上的两个服务器。虽然一台计算机上能运行多种服务，但它与Internet只需有一个物理连接。</li></ol> <p><img src="/images/study/network/cs-server.jpeg" alt="images"></p> <p>一台服务器类计算机能够同时提供多种服务，每种服务需要一个独立的服务器程序。在一台计算机上运行多种服务是实际可行的，经验告诉我们，对服务器的需求往往很分散，一个服务器可能在很长一段时间里一直处于空闲状态。空闲的服务器在等待请求到来时是不占用计算机的CPU等计算资源的。这样，如果对服务的要求量比较小，将多个服务器合并到一台计算机上，会在不明显降低性能的情况下大幅度地降低开销。</p> <p>让一台计算机运行多种服务是很有用的，因为这样硬件可以被多个服务所共享。将多个服务器合并到一台大型的服务器类的计算机上也有助于减轻系统管理员的负担，因为对系统管理员来说计算机系统减少了。当然，要获得最佳性能，必须将每个服务器和客户机程序分别运行在不同的计算机上。</p> <p>要实现C/S模式中这3种一对多的关系，需要两方面的支持。首先，这台计算机必须拥有足够的硬件资源，尤其是服务器类计算机，必须具有足够的能力，要拥有快速的处理器和足够的内存与外存。其次，这台计算机必须运行支持多个应用程序并发执行的操作系统平台，例如，UNIX或Windows操作系统。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/trefoils/Blog/edit/master/docs/study/network/cs-mode/cs-mode.md" target="_blank" rel="noopener noreferrer">在 Github 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">8/20/2020, 2:46:51 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study/network/basic/basic.html" class="prev">
        网络编程基础
      </a></span> <span class="next"><a href="/study/network/p2p-mode/p2p-mode.html">
        P2P模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.865fbb38.js" defer></script><script src="/assets/js/2.0f0c28b9.js" defer></script><script src="/assets/js/33.40b7751b.js" defer></script>
  </body>
</html>
